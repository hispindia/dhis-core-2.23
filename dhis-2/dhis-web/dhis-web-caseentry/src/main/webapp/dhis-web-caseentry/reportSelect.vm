<script type="text/javascript">   
    var i18n_report_generation_failed = '$encoder.jsEscape( $i18n.getString( "report_generation_failed" ), "'")';    
</script>   

<h3>$i18n.getString( "report_management" )</h3>

<form id="reportForm" name="reportForm" method="post" action="reportSelect.action">
<table>	
    <tr>
	  <td><label>$i18n.getString( "reporting_unit" )</label></td>
	  <td><input type="text" readonly="readonly" #if( $organisationUnit ) value="$encoder.htmlEncode( $organisationUnit.name )" #else value="[$i18n.getString( "select" )]" #end style="min-width:350px"></td>
    </tr>
    
    <tr>
        <td><label for="programId">$i18n.getString( "program" )</label></td>
        <td>
            <select id="programId" name="programId" style="min-width:350px" onchange="document.getElementById( 'reportForm' ).submit();" #if( $programs.size() == 0 ) disabled="disabled" #end>
                <option value="0">[$i18n.getString( "select" )]</option>
                #foreach( $program in $programs )
                    <option value="$program.id" #if( $programId && $program.id == $programId ) selected="selected" #end>$encoder.htmlEncode( $program.name )</option>
                #end
            </select>
        </td>
    </tr>
        
    <tr>
        <td><label>$i18n.getString( "start_date" )</label></td>
        <td>
            <input type="text" id="startDate" name="startDate" #if( $startDate ) value="$encoder.htmlEncode( $startDate )" #end>
			<script type="text/javascript">
				datePicker('startDate');
            </script>  	
        </td>
    </tr>
    
    <tr>
        <td><label>$i18n.getString( "end_date" )</label></td>
        <td>
            <input type="text" id="endDate" name="endDate" #if( $endDate ) value="$encoder.htmlEncode( $endDate )" #end>
            <script type="text/javascript">
				datePicker('endDate');
            </script> 				
        </td>      
    </tr>    	                		
</table>
<p>
    <input type="button" value="$i18n.getString( "generate" )" style="width:10em" onclick="validateAndGenerateReport()">                
    <input type="button" value="$i18n.getString( "cancel" )" onclick="window.location.href='index.action'" style="width:10em">
</p>  
</form>

<hr style="clear:both">

<span id="message"></span>
