<table class="mainPageTable">
<tr>
    <td style="vertical-align:top">    
    <table class="listTable">
        <col/>
        #foreach( $programStage in $program.programStages )
		<col/>
        #end       
        <tr>
            <th style="text-align:center">$i18n.getString( "full_name" )</th>
            #foreach( $programStage in $program.programStages )
                <th style="text-align:center">$encoder.htmlEncode( $programStage.name )</th>
            #end                
        </tr>
      
        <tbody id="list">
            #set( $mark = false )                 
            #foreach( $programInstance in $programInstances )
                <tr #alternate( $mark )>                
                    <td><a href="javascript:showPatientDetails( $programInstance.patient.id )" title='$i18n.getString( "show_details" )'>$programInstance.patient.getFullName()</a></td>                    
                    #foreach( $programStageInstance in $programInstance.programStageInstances )
                        #if( $programStageInstance.executionDate )
                            <td style="text-align:center" bgcolor="$colorMap.get( $programStageInstance.id )">
                                <a href="javascript:viewRecords( $programStageInstance.id )">
                                $format.formatDate( $programStageInstance.executionDate )
                            </td>
                        #else
                            <td style="text-align:center" bgcolor="$colorMap.get( $programStageInstance.id )">$format.formatDate( $programStageInstance.dueDate ) </td>
                        #end
                    #end
                </tr>
                #if( $mark )
                    #set( $mark = false )
                #else
                    #set( $mark = true )
                #end 
            #end    
        </tbody>

    </table>
    </td>
</tr>
</table>

<p></p>

<div class="paging-container">
	#parse( "/dhis-web-commons/paging/paging.vm" )
</div>

<div id="detailsArea" style="display:none;overflow:auto;height:250px;width:250px" ondblclick="javascript:hideDetails()">
    <div style="float:right;" onclick="javascript:hideDetails()">
        <a href="javascript:hideDetails()" title="$i18n.getString( 'hide_details' )"><img src="../images/close.png" alt="$i18n.getString( 'hide_details' )"/></a>
    </div>              
    <p><label>$i18n.getString( "identifier" ):</label><br><span id="identifierField"></span></p>
    <p><label>$i18n.getString( "attributes" ):</label><br><span id="attributeField"></span></p>
    <p><label>$i18n.getString( "enrolled_in_program" ):</label><br><span id="programField"></span></p>
</div>
