<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

  <!-- Content providers -->
  
  <bean id="reportContentProvider" 
    class="org.hisp.dhis.dashboard.provider.ReportContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
	<property name="systemSettingManager" ref="org.hisp.dhis.options.SystemSettingManager"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="reportManager" ref="org.hisp.dhis.report.ReportManager"/>
    <property name="key" value="reports"/>
  </bean>
  
  <bean id="documentContentProvider" 
    class="org.hisp.dhis.dashboard.provider.DocumentContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="key" value="documents"/>
  </bean>
  
  <bean id="dataMartExportContentProvider"
    class="org.hisp.dhis.dashboard.provider.DataMartExportContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="key" value="dataMartExports"/>
  </bean>
  
  <bean id="reportTableContentProvider"
    class="org.hisp.dhis.dashboard.provider.ReportTableContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="key" value="reportTables"/>
  </bean>
    
  <bean id="mapViewContentProvider"
    class="org.hisp.dhis.dashboard.provider.MapViewContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="systemSettingManager" ref="org.hisp.dhis.options.SystemSettingManager" />
    <property name="key" value="mapViews"/>
  </bean>
  
  <bean id="olapUrlContentProvider"
    class="org.hisp.dhis.dashboard.provider.OlapUrlContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="key" value="olapUrls"/>
  </bean>
    
  <bean id="rssHealthContentProvider" 
    class="org.hisp.dhis.dashboard.provider.RssContentProvider">
    <property name="url" value="http://health.yahoo.com/news/rss/health"/>
    <property name="key" value="healthItems"/>
  </bean>
  
  <!-- Manager -->
  
  <bean id="org.hisp.dhis.dashboard.manager.DashboardManager" 
    class="org.hisp.dhis.dashboard.manager.DefaultDashboardManager">
    <property name="userSettingService" ref="org.hisp.dhis.user.UserSettingService"/>
    <property name="contentProviders">
      <map>        
        <entry>
          <key><value>report</value></key>
          <ref local="reportContentProvider"/>
        </entry>    
        <entry>
          <key><value>document</value></key>
          <ref local="documentContentProvider"/>
        </entry>
        <entry>
          <key><value>data_mart_export</value></key>
          <ref local="dataMartExportContentProvider"/>
        </entry>
        <entry>
          <key><value>report_table</value></key>
          <ref local="reportTableContentProvider"/>
        </entry>
        <entry>
          <key><value>map_view</value></key>
          <ref local="mapViewContentProvider"/>
        </entry>
        <entry>
          <key><value>rss_health</value></key>
          <ref local="rssHealthContentProvider"/>
        </entry>
      </map>
    </property>
  </bean>
  
  <!-- Actions -->
  
  <bean id="org.hisp.dhis.dashboard.action.ProvideContentAction"
    class="org.hisp.dhis.dashboard.action.ProvideContentAction"
    scope="prototype">
    <property name="manager" ref="org.hisp.dhis.dashboard.manager.DashboardManager"/>
    <property name="chartService" ref="org.hisp.dhis.chart.ChartService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.SetAreaItemAction"
    class="org.hisp.dhis.dashboard.action.SetAreaItemAction"
    scope="prototype">
    <property name="manager" ref="org.hisp.dhis.dashboard.manager.DashboardManager"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.ClearAreaAction"
    class="org.hisp.dhis.dashboard.action.ClearAreaAction"
    scope="prototype">
    <property name="manager" ref="org.hisp.dhis.dashboard.manager.DashboardManager"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.GetChartAction"
    class="org.hisp.dhis.dashboard.action.GetChartAction"
    scope="prototype">
    <property name="chartService" ref="org.hisp.dhis.chart.ChartService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveReportAction"
    class="org.hisp.dhis.dashboard.action.RemoveReportAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="reportService" ref="org.hisp.dhis.report.ReportService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveDataMartExportAction"
    class="org.hisp.dhis.dashboard.action.RemoveDataMartExportAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="dataMartService" ref="org.hisp.dhis.datamart.DataMartService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveOlapUrlAction"
    class="org.hisp.dhis.dashboard.action.RemoveOlapUrlAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="olapURLService" ref="org.hisp.dhis.olap.OlapURLService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveDocumentAction"
    class="org.hisp.dhis.dashboard.action.RemoveDocumentAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="documentService" ref="org.hisp.dhis.document.DocumentService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveReportTableAction"
    class="org.hisp.dhis.dashboard.action.RemoveReportTableAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="reportTableService" ref="org.hisp.dhis.reporttable.ReportTableService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveMapViewAction"
    class="org.hisp.dhis.dashboard.action.RemoveMapViewAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="dashboardService" ref="org.hisp.dhis.dashboard.DashboardService"/>
    <property name="mappingService" ref="org.hisp.dhis.mapping.MappingService"/>
  </bean>
  
</beans>
