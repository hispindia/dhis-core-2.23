
<script type="text/javascript" src="javascript/FCK/fckeditor.js"></script>
<script type="text/javascript">
    var stat = '$status';
    var dataEntryFormId = -1;
    var i18n_confirm_delete = '$encoder.jsEscape( $i18n.getString( "dataentryform_confirm_delete" ) , "'" )';
    	
    #if($status == "EDIT")
        dataEntryFormId = $dataEntryForm.id;
    #end
    
    var FCKConfig;
    var FCK;
    window.onload = function()
    {
        var oFCKeditor = new FCKeditor( 'designTextarea' ) ;
        oFCKeditor.BasePath = "javascript/FCK/";
        oFCKeditor.ReplaceTextarea();
    }
    
	jQuery(document).ready(	function()
	{		
		validation( 'saveDataEntryForm', function( form ){ form.submit() }, function(){ selectAllById('selectedList') });
		
	});
	
	var previousName = '';

</script>
     
</script>

<form id="saveDataEntryForm" name="saveDataEntryForm" action="saveDataEntryForm.action" method="post" onsubmit="return validateDataEntryForm()">
<h3>$i18n.getString( "dataentryform_management_for_program_stage " ): $association.name </h3>
<table>
<tr>
<td>$i18n.getString( "select_method" ) :</td> 
<td><select name="saveMethod" id="comboSaveMethod" onChange="toggleDiv()">
    <option value="design" selected>$i18n.getString( "design_dataentry" )</option>
    <option value="choose">$i18n.getString( "choose_existing_dataentry" )</option>
</select>
</td>
</tr>
<tr><td colspan="2">&nbsp;</td></tr>
</table>
<div class="container" style="display:none"> 
    <table>
        <tr>
            <td>$i18n.getString( "choose_dataentry" ) : </td>
             <td>
                 <select id="comboDataEntry" name="dataEntryFormId" onChange="showDataEntryCode(this)" >
                     <option value="">---------</option>
                     #foreach( $dataEntry in $listDataEntryForm )
                        <option value="$dataEntry.id" >$encoder.htmlEncode( $dataEntry.name )</option>
                     #end
                 </select>
             </td>
        </tr>
    </table>
    <table>
        <tr>
        	<td id="codeContainer"></td>
        </tr>
    </table>
</div>

<div class="container" >
  <table id="detailsList">
    <col> ## Labels
    <col> ## Input
    <thead>
      <tr>
        <th colspan="2">$i18n.getString( "dataentryform_details" )</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><label>$i18n.getString( "name" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
        <td><input type="text" id="nameField" name="nameField" class="{validate:{required:true,rangelength:[4,150],alphanumericwithbasicpuncspaces:true,firstletteralphabet:false}}"  value='#if($status == "EDIT")$dataEntryForm.name#end' style="width:20em"></td>
      </tr>
      <tr>
        <td colspan="2">&nbsp;</td>
      </tr>
    </tbody>
  </table>
  
   <table>
      <col width="700">  
      <tr>
        <th>$i18n.getString( "design_dataentry" )</th>
      </tr>
      <tr>
        <td><textarea id="designTextarea" name="designTextarea" >#if($status == "EDIT") $dataEntryForm.htmlCode #end</textarea></td>
      </tr>
      <tr><td><span id="message"></span></td></tr>
      <tr>
      <td>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<table id="cde_buttontable">
    <tr>
        <td>
            <input type="submit" name="save" value="$i18n.getString( "save" )" onClick="submitForm()">
            <input type="button" name="cancel" value="$i18n.getString( "cancel" )" onclick="closeDialog();window.location.href='index.action'">
        </td>
        <td id="cde_deletebuttoncell">
            <input type="button" name="delete" value="$i18n.getString( "delete" )" onclick="closeDialog();removeDataEntryForm( $dataEntryForm.id, '$dataEntryForm.name' )" #if($status == "ADD") disabled #end>
        </td>
    </tr>
</table>
  
  <input type="hidden" name="associationIdField" id="associationIdField" value="$association.id" />
</form>

