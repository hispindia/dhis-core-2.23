<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

	<include file="dhis-web-commons.xml" />

	<package name="dhis-web-dataentry" extends="dhis-web-commons"
		namespace="/dhis-web-dataentry">

		<action name="index" class="org.hisp.dhis.de.action.EmptyAction">
			<result name="success" type="redirect">displayForm.action</result>
		</action>

		<action name="displayForm" class="org.hisp.dhis.de.action.LoadOrganisationUnitAction">
			<interceptor-ref name="organisationUnitTreeStack" />
			<result name="success" type="velocity">/main.vm</result>
			<param name="page">/dhis-web-dataentry/select.vm</param>
			<param name="menu">/dhis-web-dataentry/menu.vm</param>
			<param name="menuTreeHeight">420</param>
			<param name="javascripts">../dhis-web-commons/ouwt/ouwt.js,javascript/form.js,javascript/entry.js</param>
			<param name="stylesheets">style/dhis-web-dataentry.css</param>
		</action>

		<action name="loadDataSets" class="org.hisp.dhis.de.action.LoadDataSetsAction">
			<result name="success" type="velocity-json">/dhis-web-dataentry/responseDataSets.vm</result>
		</action>
		
		<action name="loadPeriods" class="org.hisp.dhis.de.action.LoadPeriodsAction">
			<result name="success" type="velocity-json">/dhis-web-dataentry/responsePeriods.vm</result>
		</action>
		
		<action name="loadNextPreviousPeriods" class="org.hisp.dhis.de.action.LoadNextPreviousPeriodsAction">
			<result name="success" type="velocity-json">../dhis-web-commons/ajax/jsonPeriods.vm</result>
		</action>
		
		<action name="loadDisplayModes" class="org.hisp.dhis.de.action.LoadDisplayModesAction">
			<result name="success" type="velocity-json">/dhis-web-dataentry/responseDisplayModes.vm</result>
		</action>
		
		<action name="select" class="org.hisp.dhis.de.action.SelectAction">
			<result name="customform" type="chain">customform</result>
			<result name="sectionform" type="chain">sectionform</result>
			<result name="defaultform" type="chain">defaultform</result>
			<result name="success" type="velocity">/dhis-web-dataentry/responseVoid.vm</result>
		</action>

		<action name="customform" class="org.hisp.dhis.de.action.FormAction">
			<result name="success" type="velocity">/dhis-web-dataentry/customForm.vm</result>
		</action>

		<action name="sectionform" class="org.hisp.dhis.de.action.SectionFormAction">
			<result name="success" type="velocity">/dhis-web-dataentry/sectionForm.vm</result>
		</action>

		<action name="defaultform"	class="org.hisp.dhis.de.action.FormAction">
			<result name="success" type="velocity">/dhis-web-dataentry/defaultForm.vm</result>
		</action>

		<action name="saveValue" class="org.hisp.dhis.de.action.SaveValueAction">
			<result name="success" type="velocity">status.vm</result>
			<param name="onExceptionReturn">plainTextError</param>
			<param name="requiredAuthorities">F_DATAVALUE_ADD,F_DATAVALUE_UPDATE,F_DATAVALUE_DELETE</param>
		</action>

		<action name="saveComment" class="org.hisp.dhis.de.action.SaveCommentAction">
			<result name="success" type="velocity">status.vm</result>
			<param name="onExceptionReturn">plainTextError</param>
			<param name="requiredAuthorities">F_DATAVALUE_ADD,F_DATAVALUE_UPDATE,F_DATAVALUE_DELETE</param>
		</action>

		<action name="saveMinMaxLimits" class="org.hisp.dhis.de.action.SaveMinMaxLimitsAction">
			<result name="success" type="httpheader">
				<param name="status">204</param>
			</result>
			<param name="onExceptionReturn">plainTextError</param>
			<param name="requiredAuthorities">F_DATAELEMENT_MINMAX_ADD,F_DATAELEMENT_MINMAX_UPDATE</param>
		</action>

		<action name="removeMinMaxLimits" class="org.hisp.dhis.de.action.RemoveMinMaxLimitsAction">
			<result name="success" type="httpheader">
				<param name="status">204</param>
			</result>
			<param name="onExceptionReturn">plainTextError</param>
			<param name="requiredAuthorities">F_DATAELEMENT_MINMAX_DELETE</param>
		</action>

		<action name="viewHistory" class="org.hisp.dhis.de.action.HistoryAction">
			<result name="success" type="velocity">/popup.vm</result>
			<param name="page">/dhis-web-dataentry/history.vm</param>
			<param name="javascripts">javascript/history.js</param>
		</action>

		<action name="registerCompleteDataSet" class="org.hisp.dhis.de.action.RegisterCompleteDataSetAction">
			<result name="success" type="velocity-json">../dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
			<result name="input" type="velocity-json">../dhis-web-commons/ajax/jsonResponseInput.vm</result>
		</action>

		<action name="undoCompleteDataSet" class="org.hisp.dhis.de.action.UndoCompleteDataSetAction">
			<result name="success" type="velocity-json">../dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
		</action>

		<action name="getValidationViolations" class="org.hisp.dhis.de.action.ValidationAction">
			<result name="success" type="velocity-json">../dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
			<result name="input" type="velocity-json">../dhis-web-commons/ajax/jsonResponseInput.vm</result>
		</action>

		<action name="validate" class="org.hisp.dhis.de.action.ValidationAction">
			<result name="success" type="velocity">/popup.vm</result>
			<result name="input" type="velocity">/popup.vm</result>
			<param name="page">/dhis-web-dataentry/validationResult.vm</param>
		</action>

		<action name="markValueForFollowup" class="org.hisp.dhis.de.action.MarkForFollowupAction">
			<result name="success" type="velocity-json">../dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
		</action>

		<action name="getHistoryChart" class="org.hisp.dhis.de.action.GetHistoryChartAction">
			<result name="success" type="chart"></result>
		</action>
		
	</package>
</struts>
